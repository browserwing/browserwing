package browser

import "strings"

// RecorderI18n 录制器界面的多语言文本映射
var RecorderI18n = map[string]map[string]string{
	"zh-CN": {
		"RECORDING_STATUS":         "脚本录制中",
		"STEPS_COUNT":              "0 步骤",
		"DATA_EXTRACT":             "数据抓取",
		"AI_EXTRACT":               "AI提取",
		"AI_FORMFILL":              "AI填充",
		"EMPTY_STEPS":              "还没有录制的步骤",
		"STOP_RECORDING":           "结束录制",
		"STOPPING":                 "正在停止...",
		"EXIT_EXTRACT":             "退出抓取",
		"EXIT_AI_EXTRACT":          "退出提取",
		"EXIT_AI_FORMFILL":         "退出填充",
		"AI_GENERATING":            "AI 正在生成提取代码...",
		"AI_ANALYZING_FORM":        "AI 正在分析表单结构...",
		"AI_ANALYZING_PAGE":        "AI 正在分析页面结构...",
		"AI_GENERATING_FILL":       "AI 正在生成填充代码...",
		"PLEASE_WAIT":              "请稍候，这可能需要几秒钟",
		"EXTRACT_TEXT":             "抓取文本",
		"EXTRACT_HTML":             "抓取HTML",
		"EXTRACT_ATTRIBUTE":        "抓取属性",
		"EXTRACT_MODE_ENABLED":     "数据抓取模式已开启。点击元素抓取数据，右键选择抓取类型。",
		"AI_EXTRACT_MODE_ENABLED":  "AI提取模式已开启。点击要提取数据的容器元素（如列表容器）。",
		"AI_FORMFILL_MODE_ENABLED": "AI填充表单模式已开启。点击要填充的表单容器或表单元素。",
		"FORMFILL_PROMPT":          "自动填充这个表单，生成合理的测试数据",
		"EXTRACT_PROMPT":           "提取这个容器中的所有列表项数据，包括标题、链接、图片等字段",
		"AI_TIMEOUT":               "AI 请求超时",
		"AI_FORMFILL_FAILED":       "AI 生成表单填充代码失败",
		"AI_EXTRACT_FAILED":        "AI 生成代码失败",
		"NO_CODE_RECEIVED":         "未收到生成的代码",
		"AI_FORMFILL_DESC":         "AI生成的表单填充代码",
		"AI_EXTRACT_DESC":          "AI生成的结构化数据提取",
		"AI_FORMFILL_SUCCESS":      "AI 表单填充代码已生成并添加到脚本。使用模型: ",
		"AI_EXTRACT_SUCCESS":       "AI 提取代码已生成并添加到脚本。使用模型: ",
		"AI_FORMFILL_ERROR":        "AI 表单填充失败: ",
		"AI_EXTRACT_ERROR":         "AI 提取失败: ",
		"AUTO_WAIT":                "自动等待 ",
		"FILES_SELECTED":           "选择了 ",
		"FILES_COUNT":              " 个文件: ",
		"UPLOAD_FILE":              "上传文件: ",
		"PROMPT_ATTRIBUTE":         "请输入要抓取的属性名（如 href, src, data-id）:",
		"STEPS_UNIT":               "步骤",
		"SECONDS_UNIT":             "秒",
		"WAIT_PREFIX":              "等待 ",
		"SCROLL_TO":                "滚动到",
	},
	"zh-TW": {
		"RECORDING_STATUS":         "腳本錄製中",
		"STEPS_COUNT":              "0 步驟",
		"DATA_EXTRACT":             "數據抓取",
		"AI_EXTRACT":               "AI提取",
		"AI_FORMFILL":              "AI填充",
		"EMPTY_STEPS":              "還沒有錄製的步驟",
		"STOP_RECORDING":           "結束錄製",
		"STOPPING":                 "正在停止...",
		"EXIT_EXTRACT":             "退出抓取",
		"EXIT_AI_EXTRACT":          "退出提取",
		"EXIT_AI_FORMFILL":         "退出填充",
		"AI_GENERATING":            "AI 正在生成提取代碼...",
		"AI_ANALYZING_FORM":        "AI 正在分析表單結構...",
		"AI_ANALYZING_PAGE":        "AI 正在分析頁面結構...",
		"AI_GENERATING_FILL":       "AI 正在生成填充代碼...",
		"PLEASE_WAIT":              "請稍候，這可能需要幾秒鐘",
		"EXTRACT_TEXT":             "抓取文本",
		"EXTRACT_HTML":             "抓取HTML",
		"EXTRACT_ATTRIBUTE":        "抓取屬性",
		"EXTRACT_MODE_ENABLED":     "數據抓取模式已開啟。點擊元素抓取數據，右鍵選擇抓取類型。",
		"AI_EXTRACT_MODE_ENABLED":  "AI提取模式已開啟。點擊要提取數據的容器元素（如列表容器）。",
		"AI_FORMFILL_MODE_ENABLED": "AI填充表單模式已開啟。點擊要填充的表單容器或表單元素。",
		"FORMFILL_PROMPT":          "自動填充這個表單，生成合理的測試數據",
		"EXTRACT_PROMPT":           "提取這個容器中的所有列表項數據，包括標題、鏈接、圖片等字段",
		"AI_TIMEOUT":               "AI 請求超時",
		"AI_FORMFILL_FAILED":       "AI 生成表單填充代碼失敗",
		"AI_EXTRACT_FAILED":        "AI 生成代碼失敗",
		"NO_CODE_RECEIVED":         "未收到生成的代碼",
		"AI_FORMFILL_DESC":         "AI生成的表單填充代碼",
		"AI_EXTRACT_DESC":          "AI生成的結構化數據提取",
		"AI_FORMFILL_SUCCESS":      "AI 表單填充代碼已生成並添加到腳本。使用模型: ",
		"AI_EXTRACT_SUCCESS":       "AI 提取代碼已生成並添加到腳本。使用模型: ",
		"AI_FORMFILL_ERROR":        "AI 表單填充失敗: ",
		"AI_EXTRACT_ERROR":         "AI 提取失敗: ",
		"AUTO_WAIT":                "自動等待 ",
		"FILES_SELECTED":           "選擇了 ",
		"FILES_COUNT":              " 個文件: ",
		"UPLOAD_FILE":              "上傳文件: ",
		"PROMPT_ATTRIBUTE":         "請輸入要抓取的屬性名（如 href, src, data-id）:",
		"STEPS_UNIT":               "步驟",
		"SECONDS_UNIT":             "秒",
		"WAIT_PREFIX":              "等待 ",
		"SCROLL_TO":                "滾動到",
	},
	"en": {
		"RECORDING_STATUS":         "Recording",
		"STEPS_COUNT":              "0 Steps",
		"DATA_EXTRACT":             "Extract Data",
		"AI_EXTRACT":               "AI Extract",
		"AI_FORMFILL":              "AI Fill",
		"EMPTY_STEPS":              "No recorded steps yet",
		"STOP_RECORDING":           "Stop Recording",
		"STOPPING":                 "Stopping...",
		"EXIT_EXTRACT":             "Exit Extract",
		"EXIT_AI_EXTRACT":          "Exit Extract",
		"EXIT_AI_FORMFILL":         "Exit Fill",
		"AI_GENERATING":            "AI is generating extraction code...",
		"AI_ANALYZING_FORM":        "AI is analyzing form structure...",
		"AI_ANALYZING_PAGE":        "AI is analyzing page structure...",
		"AI_GENERATING_FILL":       "AI is generating fill code...",
		"PLEASE_WAIT":              "Please wait, this may take a few seconds",
		"EXTRACT_TEXT":             "Extract Text",
		"EXTRACT_HTML":             "Extract HTML",
		"EXTRACT_ATTRIBUTE":        "Extract Attribute",
		"EXTRACT_MODE_ENABLED":     "Extract mode enabled. Click element to extract data, right-click to select extract type.",
		"AI_EXTRACT_MODE_ENABLED":  "AI extract mode enabled. Click container element to extract data (e.g., list container).",
		"AI_FORMFILL_MODE_ENABLED": "AI form fill mode enabled. Click form container or form element to fill.",
		"FORMFILL_PROMPT":          "Auto-fill this form with reasonable test data",
		"EXTRACT_PROMPT":           "Extract all list item data from this container, including titles, links, images, etc.",
		"AI_TIMEOUT":               "AI request timeout",
		"AI_FORMFILL_FAILED":       "AI form fill code generation failed",
		"AI_EXTRACT_FAILED":        "AI code generation failed",
		"NO_CODE_RECEIVED":         "No code received",
		"AI_FORMFILL_DESC":         "AI-generated form fill code",
		"AI_EXTRACT_DESC":          "AI-generated structured data extraction",
		"AI_FORMFILL_SUCCESS":      "AI form fill code generated and added to script. Model used: ",
		"AI_EXTRACT_SUCCESS":       "AI extraction code generated and added to script. Model used: ",
		"AI_FORMFILL_ERROR":        "AI form fill failed: ",
		"AI_EXTRACT_ERROR":         "AI extraction failed: ",
		"AUTO_WAIT":                "Auto wait ",
		"FILES_SELECTED":           "Selected ",
		"FILES_COUNT":              " file(s): ",
		"UPLOAD_FILE":              "Upload file: ",
		"PROMPT_ATTRIBUTE":         "Please enter the attribute name to extract (e.g., href, src, data-id):",
		"STEPS_UNIT":               "Steps",
		"SECONDS_UNIT":             "seconds",
		"WAIT_PREFIX":              "Wait ",
		"SCROLL_TO":                "Scroll to",
	},
	"es": {
		"RECORDING_STATUS":         "Grabando",
		"STEPS_COUNT":              "0 Pasos",
		"DATA_EXTRACT":             "Extraer Datos",
		"AI_EXTRACT":               "Extraer AI",
		"AI_FORMFILL":              "Rellenar AI",
		"EMPTY_STEPS":              "Aún no hay pasos grabados",
		"STOP_RECORDING":           "Detener Grabación",
		"STOPPING":                 "Deteniendo...",
		"EXIT_EXTRACT":             "Salir de Extracción",
		"EXIT_AI_EXTRACT":          "Salir de Extracción",
		"EXIT_AI_FORMFILL":         "Salir de Relleno",
		"AI_GENERATING":            "AI está generando código de extracción...",
		"AI_ANALYZING_FORM":        "AI está analizando la estructura del formulario...",
		"AI_ANALYZING_PAGE":        "AI está analizando la estructura de la página...",
		"AI_GENERATING_FILL":       "AI está generando código de relleno...",
		"PLEASE_WAIT":              "Por favor espere, esto puede tardar unos segundos",
		"EXTRACT_TEXT":             "Extraer Texto",
		"EXTRACT_HTML":             "Extraer HTML",
		"EXTRACT_ATTRIBUTE":        "Extraer Atributo",
		"EXTRACT_MODE_ENABLED":     "Modo de extracción habilitado. Haga clic en el elemento para extraer datos, clic derecho para seleccionar tipo.",
		"AI_EXTRACT_MODE_ENABLED":  "Modo de extracción AI habilitado. Haga clic en el contenedor para extraer datos (ej. contenedor de lista).",
		"AI_FORMFILL_MODE_ENABLED": "Modo de relleno AI habilitado. Haga clic en el contenedor del formulario o elemento.",
		"FORMFILL_PROMPT":          "Rellenar automáticamente este formulario con datos de prueba razonables",
		"EXTRACT_PROMPT":           "Extraer todos los datos de elementos de lista de este contenedor, incluyendo títulos, enlaces, imágenes, etc.",
		"AI_TIMEOUT":               "Tiempo de espera de solicitud AI agotado",
		"AI_FORMFILL_FAILED":       "Falló la generación de código de relleno AI",
		"AI_EXTRACT_FAILED":        "Falló la generación de código AI",
		"NO_CODE_RECEIVED":         "No se recibió código",
		"AI_FORMFILL_DESC":         "Código de relleno de formulario generado por AI",
		"AI_EXTRACT_DESC":          "Extracción de datos estructurados generada por AI",
		"AI_FORMFILL_SUCCESS":      "Código de relleno AI generado y agregado al script. Modelo usado: ",
		"AI_EXTRACT_SUCCESS":       "Código de extracción AI generado y agregado al script. Modelo usado: ",
		"AI_FORMFILL_ERROR":        "Fallo de relleno AI: ",
		"AI_EXTRACT_ERROR":         "Fallo de extracción AI: ",
		"AUTO_WAIT":                "Espera automática ",
		"FILES_SELECTED":           "Seleccionado ",
		"FILES_COUNT":              " archivo(s): ",
		"UPLOAD_FILE":              "Subir archivo: ",
		"PROMPT_ATTRIBUTE":         "Por favor ingrese el nombre del atributo a extraer (ej. href, src, data-id):",
		"STEPS_UNIT":               "Pasos",
		"SECONDS_UNIT":             "segundos",
		"WAIT_PREFIX":              "Esperar ",
		"SCROLL_TO":                "Desplazar a",
	},
	"ja": {
		"RECORDING_STATUS":         "記録中",
		"STEPS_COUNT":              "0 ステップ",
		"DATA_EXTRACT":             "データ抽出",
		"AI_EXTRACT":               "AI抽出",
		"AI_FORMFILL":              "AI入力",
		"EMPTY_STEPS":              "まだ記録されたステップがありません",
		"STOP_RECORDING":           "記録を停止",
		"STOPPING":                 "停止中...",
		"EXIT_EXTRACT":             "抽出を終了",
		"EXIT_AI_EXTRACT":          "抽出を終了",
		"EXIT_AI_FORMFILL":         "入力を終了",
		"AI_GENERATING":            "AIが抽出コードを生成しています...",
		"AI_ANALYZING_FORM":        "AIがフォーム構造を分析しています...",
		"AI_ANALYZING_PAGE":        "AIがページ構造を分析しています...",
		"AI_GENERATING_FILL":       "AIが入力コードを生成しています...",
		"PLEASE_WAIT":              "お待ちください。これには数秒かかる場合があります",
		"EXTRACT_TEXT":             "テキストを抽出",
		"EXTRACT_HTML":             "HTMLを抽出",
		"EXTRACT_ATTRIBUTE":        "属性を抽出",
		"EXTRACT_MODE_ENABLED":     "抽出モードが有効です。要素をクリックしてデータを抽出、右クリックで抽出タイプを選択。",
		"AI_EXTRACT_MODE_ENABLED":  "AI抽出モードが有効です。データを抽出するコンテナ要素（リストコンテナなど）をクリック。",
		"AI_FORMFILL_MODE_ENABLED": "AIフォーム入力モードが有効です。入力するフォームコンテナまたはフォーム要素をクリック。",
		"FORMFILL_PROMPT":          "このフォームを合理的なテストデータで自動入力",
		"EXTRACT_PROMPT":           "このコンテナ内のすべてのリスト項目データ（タイトル、リンク、画像など）を抽出",
		"AI_TIMEOUT":               "AIリクエストがタイムアウトしました",
		"AI_FORMFILL_FAILED":       "AIフォーム入力コードの生成に失敗しました",
		"AI_EXTRACT_FAILED":        "AIコードの生成に失敗しました",
		"NO_CODE_RECEIVED":         "コードを受信できませんでした",
		"AI_FORMFILL_DESC":         "AI生成のフォーム入力コード",
		"AI_EXTRACT_DESC":          "AI生成の構造化データ抽出",
		"AI_FORMFILL_SUCCESS":      "AIフォーム入力コードが生成され、スクリプトに追加されました。使用モデル: ",
		"AI_EXTRACT_SUCCESS":       "AI抽出コードが生成され、スクリプトに追加されました。使用モデル: ",
		"AI_FORMFILL_ERROR":        "AIフォーム入力に失敗しました: ",
		"AI_EXTRACT_ERROR":         "AI抽出に失敗しました: ",
		"AUTO_WAIT":                "自動待機 ",
		"FILES_SELECTED":           "選択済み ",
		"FILES_COUNT":              " ファイル: ",
		"UPLOAD_FILE":              "ファイルをアップロード: ",
		"PROMPT_ATTRIBUTE":         "抽出する属性名を入力してください（例: href, src, data-id）:",
		"STEPS_UNIT":               "ステップ",
		"SECONDS_UNIT":             "秒",
		"WAIT_PREFIX":              "待機 ",
		"SCROLL_TO":                "スクロール",
	},
}

// FloatButtonI18n 浮动按钮的多语言文本映射
var FloatButtonI18n = map[string]map[string]string{
	"zh-CN": {
		"TITLE":        "Browserwing",
		"START_RECORD": "开始录制页面",
	},
	"zh-TW": {
		"TITLE":        "Browserwing",
		"START_RECORD": "開始錄製頁面",
	},
	"en": {
		"TITLE":        "Browserwing",
		"START_RECORD": "Start Recording",
	},
	"es": {
		"TITLE":        "Browserwing",
		"START_RECORD": "Iniciar Grabación",
	},
	"ja": {
		"TITLE":        "Browserwing",
		"START_RECORD": "記録を開始",
	},
}

// ReplaceI18nPlaceholders 替换脚本中的占位符为对应语言的文本
func ReplaceI18nPlaceholders(script string, language string, i18nMap map[string]map[string]string) string {
	// 默认语言为简体中文
	if language == "" {
		language = "zh-CN"
	}

	// 获取对应语言的文本映射,如果不存在则使用简体中文
	texts, ok := i18nMap[language]
	if !ok {
		texts = i18nMap["zh-CN"]
	}

	// 替换所有占位符
	result := script
	for key, value := range texts {
		placeholder := "{{" + key + "}}"
		result = strings.ReplaceAll(result, placeholder, value)
	}

	return result
}
